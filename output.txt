INFO:     Started server process [879982]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Inside _upload_blob UploadFile(filename='2e009852-d959-44af-a25d-5de3ec9cae43.jpeg', size=1568934, headers=Headers({'content-disposition': 'form-data; name="image"; filename="2e009852-d959-44af-a25d-5de3ec9cae43.jpeg"', 'content-type': 'image/jpeg', 'content-length': '1568934'}))
File extension:  jpeg
File key:  uploads/a1663af8-f2de-4c2d-b75b-d6bb53b3fd0b.jpeg
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [879982]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [880509]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [880509]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [880568]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [880568]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [880754]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Inside _upload_blob temp_image.png
File extension:  png
File key:  uploads/77532cee-f7db-4090-b6eb-6c988f1a26ca.png
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [880754]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [881312]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [881312]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [881382]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Inside _upload_blob temp_image.png
File extension:  png
File key:  uploads/b3672a75-ad08-4877-870b-178b4c9ca282.png
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [881382]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [881813]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [881813]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [881972]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [881972]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [882040]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Inside _upload_blob /home/prathik-somanath/git/responsible/backend-server/temp_image.png
File extension:  png
File key:  e043163b-e2aa-47fe-819f-884ea21e842b.png
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [882040]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [882251]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [882251]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [882331]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Inside _upload_blob /home/prathik-somanath/git/responsible/backend-server/temp_image.png
File extension:  png
File key:  bd4f18d1-82b7-4d40-beb6-b57a0ac509c3.png
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [882331]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [882545]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Inside _upload_blob /home/prathik-somanath/git/responsible/backend-server/temp_image.png
File extension:  png
File key:  eef54fcf-04d7-451a-b9f2-92d73399e435.png
Uploaading image to  s3
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [882545]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [882946]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [882946]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [883002]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [883002]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [883073]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Inside _upload_blob /home/prathik-somanath/git/responsible/backend-server/temp_image.png
File extension:  png
File key:  temp_image.png
Uploaading image to  s3
Error in uploading file to s3 expected string or bytes-like object, got 'NoneType'
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [883073]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [883287]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [883287]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [883618]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [883618]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [884041]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Inside _upload_blob /home/prathik-somanath/git/responsible/backend-server/temp_image.png
File extension:  png
File key:  temp_image.png
Image type:  <class 'PIL.PngImagePlugin.PngImageFile'>
Uploaading image to  s3
Error in uploading file to s3 expected string or bytes-like object, got 'NoneType'
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [884041]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [884852]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Inside _upload_blob /home/prathik-somanath/git/responsible/backend-server/temp_image.png
File extension:  png
File key:  temp_image.png
Image type:  <class 'PIL.PngImagePlugin.PngImageFile'>
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to None as temp_image.png
Uploaading image to  s3
Error in uploading file to s3 expected string or bytes-like object, got 'NoneType'
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [884852]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Stopping reloader process [879980]
INFO:     Will watch for changes in these directories: ['/home/prathik-somanath/git/responsible/backend-server']
INFO:     Uvicorn running on http://0.0.0.0:4000 (Press CTRL+C to quit)
INFO:     Started reloader process [885357] using StatReload
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [885359]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Inside _upload_blob /home/prathik-somanath/git/responsible/backend-server/temp_image.png
File extension:  png
File key:  temp_image.png
Image type:  <class 'PIL.PngImagePlugin.PngImageFile'>
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as temp_image.png
Uploaading image to  s3
File uploaded to s3 temp_image.png
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [885359]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [885794]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [885794]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [885958]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [885958]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [886016]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as 79cd71e8-6029-4a5f-b2ce-a46f4b55bf39.png
Uploaading image to  s3
File uploaded to s3 79cd71e8-6029-4a5f-b2ce-a46f4b55bf39.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to 79cd71e8-6029-4a5f-b2ce-a46f4b55bf39.png.
Getting patient info for  ['680195f77604a4525291c0e9', '6801a0dbdfc8881e853afff4']
Getting hazards and recommendations
Inside _get_hazards_and_recommendations
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [886016]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [886626]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [886626]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [886777]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as 77fd30bd-0d7f-4271-9f28-5f1e65d30af5.png
Uploaading image to  s3
File uploaded to s3 77fd30bd-0d7f-4271-9f28-5f1e65d30af5.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to 77fd30bd-0d7f-4271-9f28-5f1e65d30af5.png.
Getting patient info for  ['680195f77604a4525291c0e9', '6801a0dbdfc8881e853afff4']
Getting hazards and recommendations
Inside _get_hazards_and_recommendations
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [886777]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [887627]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [887627]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [887944]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [887944]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [887990]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as c4cb806a-dd81-4bd4-9247-acf06785752b.png
Uploaading image to  s3
File uploaded to s3 c4cb806a-dd81-4bd4-9247-acf06785752b.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to c4cb806a-dd81-4bd4-9247-acf06785752b.png.
Getting patient info for  ['680195f77604a4525291c0e9', '6801a0dbdfc8881e853afff4']
Getting hazards and recommendations
Inside _get_hazards_and_recommendations
Encoded image:  <class 'str'>
Prompt of condition:  User has a condition: Knee pain. User has a condition: Old age. 
Hazards:  [Hazard(priority='High', description='Poor Lighting', score=0.9), Hazard(priority='High', description='Cluttered Workspace', score=0.8), Hazard(priority='High', description='Loose Wires/Cables', score=0.7), Hazard(priority='Medium', description='Unsupportive Chair', score=0.6), Hazard(priority='Medium', description='Inadequate Workspace Height', score=0.5), Hazard(priority='Medium', description='Items out of reach', score=0.4), Hazard(priority='Medium', description='Slippery Surfaces', score=0.3), Hazard(priority='Low', description='Poor Monitor Placement', score=0.2), Hazard(priority='Low', description='Eye Strain from Computer Use', score=0.1), Hazard(priority='Low', description='Lack of Breaks', score=0.1), Hazard(priority='Low', description='Vision Problems', score=0.1), Hazard(priority='Low', description='Difficulty Using Computer', score=0.1), Hazard(priority='Low', description='Medication Side Effects', score=0.1), Hazard(priority='Low', description='Emerging Health Issues', score=0.1)]
Recommendations:  ['Ensure adequate lighting to prevent trips and falls, especially at night.', 'Remove or secure any loose wires or cables that could cause tripping.', 'Declutter the area to eliminate obstacles.', 'Consider installing grab bars in key areas such as near the workspace.', 'Use a supportive chair with armrests to make it easier to stand up.', 'Ensure the workspace is at a comfortable height to avoid straining.', 'Keep frequently used items within easy reach to minimize bending or stretching.', 'Use non-slip mats or rugs to prevent slips and falls.', 'Use a monitor stand to ensure proper posture.', 'Get regular eye checkups to ensure optimal vision.', 'Incorporate regular breaks and stretching exercises to prevent fatigue.', 'Use assistive devices like magnifiers or screen readers if needed.', 'Consider using voice-activated software for computer tasks.', 'Evaluate medication use with a doctor.', "Ensure regular doctor's visits for any emerging problem"]
hazard_list:  high_priority=['Poor Lighting', 'Cluttered Workspace', 'Loose Wires/Cables'] medium_priority=['Unsupportive Chair', 'Inadequate Workspace Height', 'Items out of reach', 'Slippery Surfaces'] low_priority=['Poor Monitor Placement', 'Eye Strain from Computer Use', 'Lack of Breaks', 'Vision Problems', 'Difficulty Using Computer', 'Medication Side Effects', 'Emerging Health Issues']
Inside _get_risk_score
Risk score:  0.4833333333333332
Safety Score:  52
Inside _get_bounding_box
hazards texts:  [['Poor Lighting', 'Cluttered Workspace', 'Loose Wires/Cables', 'Unsupportive Chair', 'Inadequate Workspace Height', 'Items out of reach', 'Slippery Surfaces', 'Poor Monitor Placement', 'Eye Strain from Computer Use', 'Lack of Breaks', 'Vision Problems', 'Difficulty Using Computer', 'Medication Side Effects', 'Emerging Health Issues']]
Sending the inputs through processor
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [887990]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [888368]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as 420ebf81-57b6-4561-bd4f-1006d1d4a3fd.png
Uploaading image to  s3
File uploaded to s3 420ebf81-57b6-4561-bd4f-1006d1d4a3fd.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to 420ebf81-57b6-4561-bd4f-1006d1d4a3fd.png.
Getting patient info for  ['680195f77604a4525291c0e9', '6801a0dbdfc8881e853afff4']
Getting hazards and recommendations
Inside _get_hazards_and_recommendations
Encoded image:  <class 'str'>
Prompt of condition:  User has a condition: Knee pain. User has a condition: Old age. 
Hazards:  [Hazard(priority='High', description='Cluttered workspace', score=0.8), Hazard(priority='High', description='Poor posture due to screen height', score=0.7), Hazard(priority='Medium', description='Poorly organized cables', score=0.4)]
Recommendations:  ['Adjust screen height to improve posture', 'Declutter workspace']
hazard_list:  high_priority=['Cluttered workspace', 'Poor posture due to screen height'] medium_priority=['Poorly organized cables'] low_priority=[]
Inside _get_risk_score
Risk score:  0.6625
Safety Score:  34
Inside _get_bounding_box
hazards texts:  [['Cluttered workspace', 'Poor posture due to screen height', 'Poorly organized cables']]
Sending the inputs through processor
Error in _get_bounding_box 
Owlv2ImageProcessor requires the scipy library but it was not found in your environment. You can install it with pip:
`pip install scipy`. Please note that you may need to restart your runtime after installation.

INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [888368]
Database connection closed
INFO:     Stopping reloader process [885357]
INFO:     Will watch for changes in these directories: ['/home/prathik-somanath/git/responsible/backend-server']
INFO:     Uvicorn running on http://0.0.0.0:4000 (Press CTRL+C to quit)
INFO:     Started reloader process [888858] using StatReload
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [888860]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as cc13a93e-93de-4849-b42e-5ef9a9da015e.png
Uploaading image to  s3
File uploaded to s3 cc13a93e-93de-4849-b42e-5ef9a9da015e.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to cc13a93e-93de-4849-b42e-5ef9a9da015e.png.
Getting patient info for  ['680195f77604a4525291c0e9', '6801a0dbdfc8881e853afff4']
Getting hazards and recommendations
Inside _get_hazards_and_recommendations
Encoded image:  <class 'str'>
Prompt of condition:  User has a condition: Knee pain. User has a condition: Old age. 
Hazards:  [Hazard(priority='Low', description='Poor lighting', score=0.3), Hazard(priority='Low', description='Cluttered workspace', score=0.4)]
Recommendations:  ['Improve lighting in the workspace to reduce eye strain and potential for trips/falls.', 'Declutter the workspace to remove any potential tripping hazards.']
hazard_list:  high_priority=[] medium_priority=[] low_priority=['Poor lighting', 'Cluttered workspace']
Inside _get_risk_score
Risk score:  0.35
Safety Score:  65
Inside _get_bounding_box
hazards texts:  [['Poor lighting', 'Cluttered workspace']]
Sending the inputs through processor
Forward pass
Get preprocessed image
Sending post_process_grounded_object_detection with threshold  0.15
Bounding box:  []
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as 9393f2be-2262-4082-9b85-a13973627a6e.png
Uploaading image to  s3
File uploaded to s3 9393f2be-2262-4082-9b85-a13973627a6e.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to 9393f2be-2262-4082-9b85-a13973627a6e.png.
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 400 Bad Request
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as 5bc1e4ff-2cf4-422a-9d08-41bb58da067f.png
Uploaading image to  s3
File uploaded to s3 5bc1e4ff-2cf4-422a-9d08-41bb58da067f.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to 5bc1e4ff-2cf4-422a-9d08-41bb58da067f.png.
Getting patient info for  ['680195f77604a4525291c0e9', '6801a0dbdfc8881e853afff4']
Getting hazards and recommendations
Inside _get_hazards_and_recommendations
Encoded image:  <class 'str'>
Prompt of condition:  User has a condition: Knee pain. User has a condition: Old age. 
Hazards:  [Hazard(priority='High', description='Poorly organized cables', score=0.7), Hazard(priority='Medium', description='Cluttered desk', score=0.6), Hazard(priority='Low', description='Poor lighting', score=0.3)]
Recommendations:  ['Organize cables to prevent tripping hazards, especially near walkways.', 'Declutter the desk to create more usable space and prevent items from falling.', 'Improve lighting to reduce eye strain and improve visibility.']
hazard_list:  high_priority=['Poorly organized cables'] medium_priority=['Cluttered desk'] low_priority=['Poor lighting']
Inside _get_risk_score
Risk score:  0.6
Safety Score:  40
Inside _get_bounding_box
hazards texts:  [['Poorly organized cables', 'Cluttered desk', 'Poor lighting']]
Sending the inputs through processor
Forward pass
Get preprocessed image
Sending post_process_grounded_object_detection with threshold  0.15
Bounding box:  []
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as a7858bae-97c2-4a8d-8814-4355da32e399.png
Uploaading image to  s3
File uploaded to s3 a7858bae-97c2-4a8d-8814-4355da32e399.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to a7858bae-97c2-4a8d-8814-4355da32e399.png.
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 400 Bad Request
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [888860]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [889907]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [889907]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [890105]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [890105]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [890165]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/controllers/space_controllers.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [890165]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [890292]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as a8771ef8-98af-4fb9-a6ad-3fcb7e0830ea.png
Uploaading image to  s3
File uploaded to s3 a8771ef8-98af-4fb9-a6ad-3fcb7e0830ea.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to a8771ef8-98af-4fb9-a6ad-3fcb7e0830ea.png.
Getting patient info for  ['680195f77604a4525291c0e9', '6801a0dbdfc8881e853afff4']
Getting hazards and recommendations
Inside _get_hazards_and_recommendations
Encoded image:  <class 'str'>
Prompt of condition:  User has a condition: Knee pain. User has a condition: Old age. 
Hazards:  []
Recommendations:  ['Ensure adequate lighting to prevent falls and improve visibility.', 'Remove or secure any loose cables or wires to prevent tripping.', 'Consider installing grab bars in key areas for added support.', 'Arrange furniture to allow for easy movement and reduce clutter.', 'Use assistive devices like walkers or canes if needed.', 'Make sure essential items are within easy reach to avoid excessive stretching or bending.', 'Ensure proper ventilation to maintain air quality.', 'Provide stable seating options with armrests for ease of sitting and standing.', 'Maintain a comfortable room temperature to avoid discomfort.', 'Use nightlights to improve visibility during nighttime hours.', 'Make sure flooring is even and free of tripping hazards.', 'Address potential fire hazards such as flammable materials or faulty wiring.', 'Eliminate sharp edges or corners on furniture to prevent injuries.', 'Keep the environment clean and free of dust or allergens.', 'Use non-slip mats in areas prone to slipping or spills.', 'Regularly inspect the room for potential hazards and address them promptly.', 'Store cleaning supplies and hazardous materials securely out of reach.', 'Ensure smoke detectors and carbon monoxide detectors are functioning properly.', 'Provide adequate space for mobility devices if used.', 'Install ramps or lifts to navigate stairs or elevated areas if needed.', 'Consider using contrasting colors to improve visibility for individuals with visual impairments.', 'Use voice-activated or remote-controlled devices to minimize physical exertion.', 'Evaluate and address any potential security risks such as inadequate locks or surveillance.', 'Consider smart home technologies to automate tasks and improve safety.', 'Ensure easy access to emergency contact information and assistance.', 'Establish a regular schedule for maintenance and repairs to prevent hazards.', 'Conduct regular safety drills to practice emergency procedures.', 'Document all safety measures and protocols for easy reference.', 'Stay informed about age-related safety concerns and adapt the environment accordingly.', 'Consult with healthcare professionals for personalized recommendations and safety advice.', 'Maintain a positive attitude and focus on proactive safety measures.', 'Communicate openly with caregivers and family members about safety concerns.', 'Create a support network to share experiences and resources related to safety.', 'Advocate for policies and initiatives that promote age-friendly environments and safety.', 'Celebrate successes and milestones in maintaining a safe and healthy environment.', 'Foster a sense of empowerment and independence in managing safety.', 'Provide ongoing education and training on safety practices and hazard prevention.', 'Seek feedback from residents and visitors to identify areas for improvement.', 'Collaborate with community organizations to enhance safety resources and programs.', 'Recognize and reward individuals who contribute to a safe and secure environment.', 'Embrace innovation and technology to enhance safety and accessibility.', 'Prioritize prevention and early intervention to minimize risks and potential harm.', 'Integrate safety into all aspects of daily life and decision-making.', 'Promote a culture of safety and well-being for all individuals in the community.', 'Advocate for policies and regulations that support age-friendly and safe environments.', 'Encourage research and development of technologies to enhance safety for older adults.', 'Foster collaboration among stakeholders to create a comprehensive safety ecosystem.', 'Celebrate achievements in promoting safety and well-being for older adults.', 'Empower individuals to take control of their safety and well-being.', 'Create a world where everyone can age safely and gracefully.']
hazard_list:  high_priority=[] medium_priority=[] low_priority=[]
Inside _get_risk_score
Error in upload_image division by zero
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [890292]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [890766]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [890766]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [891149]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [891149]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [891259]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as ab4624af-2e74-422f-926b-c5a6ffabfe59.png
Uploaading image to  s3
File uploaded to s3 ab4624af-2e74-422f-926b-c5a6ffabfe59.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to ab4624af-2e74-422f-926b-c5a6ffabfe59.png.
Getting patient info for  ['680195f77604a4525291c0e9', '6801a0dbdfc8881e853afff4']
Getting hazards and recommendations
Inside _get_hazards_and_recommendations
Encoded image:  <class 'str'>
Prompt of condition:  User has a condition: Knee pain. User has a condition: Old age. 
Hazards:  [Hazard(priority='High', description='Poor lighting', score=0.9), Hazard(priority='High', description='Cluttered workspace', score=0.8)]
Recommendations:  ['Improve lighting in the workspace to prevent eye strain and potential trips/falls.', 'Declutter workspace to prevent tripping hazards.']
hazard_list:  high_priority=['Poor lighting', 'Cluttered workspace'] medium_priority=[] low_priority=[]
Inside _get_risk_score
Risk score:  0.8500000000000001
Safety Score:  15
Inside _get_bounding_box
hazards texts:  [['Poor lighting', 'Cluttered workspace']]
Sending the inputs through processor
Forward pass
Get preprocessed image
Sending post_process_grounded_object_detection with threshold  0.15
Bounding box:  []
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as 1ab3eba0-d740-4f7f-ac25-a868b6fa8ad8.png
Uploaading image to  s3
File uploaded to s3 1ab3eba0-d740-4f7f-ac25-a868b6fa8ad8.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to 1ab3eba0-d740-4f7f-ac25-a868b6fa8ad8.png.
Error in upload_image 2 validation errors for SpaceLogCreate
image_data
  Input should be a valid string [type=string_type, input_value={'url': 'https://riskitfr...-926b-c5a6ffabfe59.png'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
image_bb
  Input should be a valid string [type=string_type, input_value={'url': 'https://riskitfr...-ac25-a868b6fa8ad8.png'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 400 Bad Request
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [891259]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [891666]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as 50da67c5-ec1d-418c-99a1-db21ac183987.png
Uploaading image to  s3
File uploaded to s3 50da67c5-ec1d-418c-99a1-db21ac183987.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to 50da67c5-ec1d-418c-99a1-db21ac183987.png.
Getting patient info for  ['680195f77604a4525291c0e9', '6801a0dbdfc8881e853afff4']
Getting hazards and recommendations
Inside _get_hazards_and_recommendations
Encoded image:  <class 'str'>
Prompt of condition:  User has a condition: Knee pain. User has a condition: Old age. 
Hazards:  [Hazard(priority='High', description='Poor lighting', score=0.75), Hazard(priority='High', description='Cluttered space', score=0.85), Hazard(priority='High', description='Narrow pathways', score=0.9), Hazard(priority='Medium', description='Lack of grab bars', score=0.6), Hazard(priority='Medium', description='Low seating', score=0.55), Hazard(priority='Medium', description='Poor edge definition', score=0.5), Hazard(priority='Low', description='Loose cords or wires', score=0.4), Hazard(priority='Low', description='Uneven flooring or thresholds', score=0.35), Hazard(priority='Low', description='Items out of reach', score=0.3)]
Recommendations:  ['Ensure adequate and even lighting to prevent trips and falls.', 'Declutter the space to remove tripping hazards.', 'Arrange furniture to create wide, clear pathways.', 'Consider installing grab bars in key locations for support.', 'Choose seating options that are easy to get in and out of.', 'Use contrasting colors to define edges and transitions.', 'Secure or remove any loose cords or wires.', 'Address any uneven flooring or thresholds.', 'Keep frequently used items within easy reach.', 'Regularly inspect the space for potential hazards and address them promptly.']
hazard_list:  high_priority=['Poor lighting', 'Cluttered space', 'Narrow pathways'] medium_priority=['Lack of grab bars', 'Low seating', 'Poor edge definition'] low_priority=['Loose cords or wires', 'Uneven flooring or thresholds', 'Items out of reach']
Inside _get_risk_score
Risk score:  0.6583333333333333
Safety Score:  34
Inside _get_bounding_box
hazards texts:  [['Poor lighting', 'Cluttered space', 'Narrow pathways', 'Lack of grab bars', 'Low seating', 'Poor edge definition', 'Loose cords or wires', 'Uneven flooring or thresholds', 'Items out of reach']]
Sending the inputs through processor
Forward pass
Get preprocessed image
Sending post_process_grounded_object_detection with threshold  0.15
Detected Poor edge definition with confidence 0.222 at location [486.78, 715.45, 724.25, 738.52]
Error in _get_bounding_box BaseModel.__init__() takes 1 positional argument but 4 were given
Error in upload_image 500: Get Bounding Box failed: BaseModel.__init__() takes 1 positional argument but 4 were given
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [891666]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [892123]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as 0f0431d6-69e2-43b5-8207-454df3862d26.png
Uploaading image to  s3
File uploaded to s3 0f0431d6-69e2-43b5-8207-454df3862d26.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to 0f0431d6-69e2-43b5-8207-454df3862d26.png.
Getting patient info for  ['680195f77604a4525291c0e9', '6801a0dbdfc8881e853afff4']
Getting hazards and recommendations
Inside _get_hazards_and_recommendations
Encoded image:  <class 'str'>
Prompt of condition:  User has a condition: Knee pain. User has a condition: Old age. 
Hazards:  [Hazard(priority='High', description='Poor lighting in the room, increasing fall risk due to reduced visibility.', score=0.9), Hazard(priority='High', description='Cables and wires on the floor pose a tripping hazard.', score=0.85), Hazard(priority='High', description='Clutter or objects on the floor increase the risk of falls.', score=0.75), Hazard(priority='Medium', description='Unstable furniture could lead to falls.', score=0.6), Hazard(priority='Medium', description='Improper workstation ergonomics leading to strain and discomfort.', score=0.5), Hazard(priority='Low', description='Laptop positioned such that it could cause the user to be walking or moving around while using it, leading to potential collisions', score=0.4), Hazard(priority='Low', description='Laptop cord is too long, thus, it poses as a tripping hazard', score=0.3), Hazard(priority='Low', description='The laptop may tip over causing damage to the device.', score=0.2)]
Recommendations:  ['Ensure adequate lighting to reduce the risk of falls.', 'Clear any clutter or obstacles on the floor to prevent tripping hazards.', 'Use non-slip mats or rugs to provide better traction and prevent slips.', 'Arrange furniture to provide clear pathways and minimize the risk of bumping into objects.', 'Consider using assistive devices, such as grab bars or handrails, to improve stability and reduce the risk of falls.', 'Regularly inspect the room for potential hazards and address them promptly.', 'Make sure to arrange the room so that items that you use more often are easily reachable and do not require extensive bending or stooping.', 'Ensure that all furniture is stable and sturdy to prevent falls or injuries.', 'Consider using a bedside commode to reduce the need to walk to the bathroom at night.', 'Keep essential items, such as medications and eyeglasses, within easy reach.', 'Arrange electrical cords and wires to minimize tripping hazards.', 'Install brighter light bulbs to improve visibility.', 'Consider painting walls and doors in contrasting colors to improve depth perception.', 'Use contrasting colors to highlight edges of steps and thresholds.', 'Place a lamp near the bed for easy access during the night.', 'Remove or secure loose rugs that could cause tripping.', 'Install nightlights in hallways and bathrooms to improve visibility during the night.', 'Reduce clutter on stairs to prevent tripping.', 'Consider installing a stairlift if stairs pose a significant challenge.', 'Store frequently used items on shelves that are easy to reach without excessive bending or stretching.', 'Use adaptive equipment to assist with daily tasks, such as dressing or bathing.', 'Seek guidance from an occupational therapist for recommendations specific to your needs.', 'Consider making structural modifications to the home, such as widening doorways or installing ramps.', 'Consult with a healthcare professional for personalized advice on fall prevention.', 'Keep pathways clear of obstacles.', 'Use assistive devices when necessary.', 'Maintain overall physical fitness to improve balance and strength.', 'Ensure that walking aids, such as canes or walkers, are properly fitted and in good condition.', 'Wear shoes that fit well and provide good support.', 'Avoid walking in socks or slippers alone, as they can increase the risk of slipping.', 'When standing up from a chair or bed, do so slowly to avoid dizziness.', 'Avoid rushing when walking, and take your time to navigate the environment.', 'Be mindful of uneven surfaces or changes in flooring.', 'Use caution when walking on wet or icy surfaces.', 'Avoid carrying heavy or bulky items that could affect balance.', 'Avoid prolonged standing or walking, which can exacerbate knee pain.', 'When standing for long periods, shift weight from one leg to the other to reduce strain on the knees.', 'Take frequent breaks to sit and rest the knees.', 'Use proper lifting techniques to avoid strain on the knees.', 'Avoid lifting heavy objects that could cause further knee injury.', 'Maintain a healthy weight to reduce stress on the knees.', 'Engage in low-impact exercises to strengthen the muscles around the knees.', 'Regularly stretch and strengthen the knee muscles.', 'Use ice or heat packs to manage knee pain and inflammation.', 'Consider using over-the-counter pain relievers to alleviate knee discomfort.', 'Consult with a physical therapist for personalized exercise and rehabilitation programs.', 'Consider using a knee brace to provide support and stability.', 'Receive regular medical checkups to monitor knee health and address any underlying conditions.', 'Manage other medical conditions that could contribute to knee pain, such as arthritis.', 'Maintain a healthy diet rich in nutrients that support joint health.', 'Stay hydrated to keep joints lubricated.', 'Avoid activities that exacerbate knee pain.', 'Pace activities to avoid overexertion and knee strain.', 'Allow sufficient time for recovery after physical activity.', 'Prioritize rest and relaxation to reduce stress on the knees.', 'Practice mindfulness and stress-reduction techniques.', 'Avoid smoking, as it can impair joint health.', 'Limit alcohol consumption, as it can interfere with pain management.', 'Seek support from family and friends to cope with the challenges of knee pain.', 'Consider joining a support group for individuals with knee pain.', 'Stay positive and focus on what you can do to manage your knee pain.', 'Educate yourself about knee pain and treatment options.', 'Advocate for your needs and preferences in healthcare decisions.', 'Take an active role in managing your knee pain and overall health.', 'Monitor your symptoms and track progress over time.', 'Adjust your treatment plan as needed to optimize outcomes.', 'Celebrate small victories and acknowledge your achievements.', 'Be patient with yourself and the healing process.', 'Remember that knee pain can be managed effectively with the right approach.', 'Consider placing frequently used objects within easy reach to avoid excessive bending or stretching.', 'Ensure cords from the laptop are properly managed to avoid tripping.', 'Ensure the lighting in the room is adequate.', 'Avoid placing objects on the floor to minimize fall hazards.', 'Clear pathways to reduce the risk of falls, especially at night.', 'Consider using a different chair or workstation that has better ergonomics.', 'Evaluate the placement of the laptop to ensure proper posture and reduce the risk of neck and back strain.', 'Take frequent breaks from using the laptop to avoid prolonged sitting or strain.', 'Adjust the laptop screen to a comfortable viewing height and angle.', 'Avoid using the laptop in a reclined or awkward position that could strain the neck and back.', 'Consider using an external keyboard and mouse to improve ergonomics and reduce strain on the wrists and hands.', 'Ensure that the laptop is stable and not prone to tipping over.', 'Be cautious when walking or moving around while using the laptop to avoid tripping or falling.', 'Consider using a laptop stand to raise the screen to eye level.']
hazard_list:  high_priority=['Poor lighting in the room, increasing fall risk due to reduced visibility.', 'Cables and wires on the floor pose a tripping hazard.', 'Clutter or objects on the floor increase the risk of falls.'] medium_priority=['Unstable furniture could lead to falls.', 'Improper workstation ergonomics leading to strain and discomfort.'] low_priority=['Laptop positioned such that it could cause the user to be walking or moving around while using it, leading to potential collisions', 'Laptop cord is too long, thus, it poses as a tripping hazard', 'The laptop may tip over causing damage to the device.']
Inside _get_risk_score
Risk score:  0.6625
Safety Score:  34
Inside _get_bounding_box
hazards texts:  [['Poor lighting in the room, increasing fall risk due to reduced visibility.', 'Cables and wires on the floor pose a tripping hazard.', 'Clutter or objects on the floor increase the risk of falls.', 'Unstable furniture could lead to falls.', 'Improper workstation ergonomics leading to strain and discomfort.', 'Laptop positioned such that it could cause the user to be walking or moving around while using it, leading to potential collisions', 'Laptop cord is too long, thus, it poses as a tripping hazard', 'The laptop may tip over causing damage to the device.']]
Sending the inputs through processor
Error in _get_bounding_box Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' 'truncation=True' to have batched tensors with the same length. Perhaps your features (`input_ids` in this case) have excessive nesting (inputs type `list` where type `int` is expected).
Error in upload_image 500: Get Bounding Box failed: Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' 'truncation=True' to have batched tensors with the same length. Perhaps your features (`input_ids` in this case) have excessive nesting (inputs type `list` where type `int` is expected).
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as e7f27136-bf44-4ebc-aa9d-bcc18509bd0b.png
Uploaading image to  s3
File uploaded to s3 e7f27136-bf44-4ebc-aa9d-bcc18509bd0b.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to e7f27136-bf44-4ebc-aa9d-bcc18509bd0b.png.
Getting patient info for  ['680195f77604a4525291c0e9', '6801a0dbdfc8881e853afff4']
Getting hazards and recommendations
Inside _get_hazards_and_recommendations
Encoded image:  <class 'str'>
Prompt of condition:  User has a condition: Knee pain. User has a condition: Old age. 
Hazards:  [Hazard(priority='High', description='Cluttered workspace', score=0.7), Hazard(priority='High', description='Poor posture due to prolonged sitting', score=0.8), Hazard(priority='Medium', description='Eye strain from screen glare', score=0.5), Hazard(priority='Low', description='Potential trip hazard from laptop cord', score=0.3)]
Recommendations:  ['Declutter workspace to avoid accidental falls and create more free space', 'Take frequent breaks to avoid prolonged sitting', 'Use ergonomic chair to improve posture', 'Reduce screen glare by adjusting the screen or using a screen filter', 'Use a monitor instead of laptop to avoid looking down', 'Secure laptop cord to avoid tripping']
hazard_list:  high_priority=['Cluttered workspace', 'Poor posture due to prolonged sitting'] medium_priority=['Eye strain from screen glare'] low_priority=['Potential trip hazard from laptop cord']
Inside _get_risk_score
Risk score:  0.6444444444444444
Safety Score:  36
Inside _get_bounding_box
hazards texts:  [['Cluttered workspace', 'Poor posture due to prolonged sitting', 'Eye strain from screen glare', 'Potential trip hazard from laptop cord']]
Sending the inputs through processor
Forward pass
Get preprocessed image
Sending post_process_grounded_object_detection with threshold  0.15
Detected Eye strain from screen glare with confidence 0.25 at location [6.46, 160.18, 486.16, 475.82]
Error in _get_bounding_box 3 validation errors for BoundingBox
box
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
score
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
label
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Error in upload_image 500: Get Bounding Box failed: 3 validation errors for BoundingBox
box
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
score
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
label
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [892123]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [893016]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  StatReload detected changes in 'spaces/models/space_models.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [893016]
Unique indexes created on username and email.
Connected to the database
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [893189]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as 0ce5e43a-70bc-4319-9963-3fa7f1f6ecc3.png
Uploaading image to  s3
File uploaded to s3 0ce5e43a-70bc-4319-9963-3fa7f1f6ecc3.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to 0ce5e43a-70bc-4319-9963-3fa7f1f6ecc3.png.
Getting patient info for  ['680195f77604a4525291c0e9', '6801a0dbdfc8881e853afff4']
Getting hazards and recommendations
Inside _get_hazards_and_recommendations
Encoded image:  <class 'str'>
Prompt of condition:  User has a condition: Knee pain. User has a condition: Old age. 
Hazards:  [Hazard(priority='High', description='Poor lighting', score=0.95), Hazard(priority='High', description='Cable and wire clutter', score=0.9), Hazard(priority='High', description='Obstacles in walkways', score=0.85), Hazard(priority='Medium', description='Uneven flooring', score=0.7), Hazard(priority='Medium', description='Area rugs', score=0.65), Hazard(priority='Medium', description='Sharp edges on furniture', score=0.6), Hazard(priority='Low', description='Items out of reach', score=0.4), Hazard(priority='Low', description='Step stools or ladders', score=0.35), Hazard(priority='Low', description='Narrow pathways', score=0.3), Hazard(priority='Low', description='Unstable furniture', score=0.25), Hazard(priority='Low', description='Uncomfortable room temperature', score=0.2), Hazard(priority='Low', description='Lack of assistive devices', score=0.15), Hazard(priority='Low', description='Infrequent hazard assessment', score=0.1), Hazard(priority='Low', description='Lack of contrasting colors', score=0.05), Hazard(priority='Low', description='Lack of grab bars', score=0.05)]
Recommendations:  ['Ensure adequate lighting to prevent trips and falls, especially at night.', 'Organize cables and wires to prevent tripping hazards.', 'Remove any clutter or obstacles from walkways to ensure easy movement.', 'Consider installing grab bars in key areas to aid movement.', 'Use contrasting colors to define edges of steps and transitions between surfaces.', 'Ensure flooring is even and non-slip to prevent falls.', 'Avoid area rugs or secure them with non-slip padding.', 'Consider replacing furniture with rounded edges to reduce injury from falls.', 'Keep frequently used items within easy reach to avoid excessive bending or stretching.', 'Avoid step stools or ladders.', 'Position furniture to allow for clear and wide pathways.', 'Ensure all furniture is stable and sturdy.', 'Maintain a comfortable room temperature to avoid stiffness or discomfort.', 'Use assistive devices, such as walkers or canes, as needed.', 'Regularly assess the room for potential hazards and address them promptly. ']
hazard_list:  high_priority=['Poor lighting', 'Cable and wire clutter', 'Obstacles in walkways'] medium_priority=['Uneven flooring', 'Area rugs', 'Sharp edges on furniture'] low_priority=['Items out of reach', 'Step stools or ladders', 'Narrow pathways', 'Unstable furniture', 'Uncomfortable room temperature', 'Lack of assistive devices', 'Infrequent hazard assessment', 'Lack of contrasting colors', 'Lack of grab bars']
Inside _get_risk_score
Risk score:  0.5770833333333334
Safety Score:  42
Inside _get_bounding_box
hazards texts:  [['Poor lighting', 'Cable and wire clutter', 'Obstacles in walkways', 'Uneven flooring', 'Area rugs', 'Sharp edges on furniture', 'Items out of reach', 'Step stools or ladders', 'Narrow pathways', 'Unstable furniture', 'Uncomfortable room temperature', 'Lack of assistive devices', 'Infrequent hazard assessment', 'Lack of contrasting colors', 'Lack of grab bars']]
Sending the inputs through processor
Forward pass
Get preprocessed image
Sending post_process_grounded_object_detection with threshold  0.15
Detected Sharp edges on furniture with confidence 0.161 at location [-3.57, 90.84, 516.02, 144.2]
Error in _get_bounding_box 1 validation error for BoundingBox
label
  Input should be a valid string [type=string_type, input_value=tensor(5), input_type=Tensor]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
Error in upload_image 500: Get Bounding Box failed: 1 validation error for BoundingBox
label
  Input should be a valid string [type=string_type, input_value=tensor(5), input_type=Tensor]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 500 Internal Server Error
WARNING:  StatReload detected changes in 'spaces/views/space_views.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [893189]
Database connection closed
/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'allow_population_by_field_name' has been renamed to 'validate_by_name'
  warnings.warn(message, UserWarning)
INFO:     Started server process [893520]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
Unique indexes created on username and email.
Connected to the database
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as 40c3946d-0cce-44e3-afbf-d5c028419c5c.png
Uploaading image to  s3
File uploaded to s3 40c3946d-0cce-44e3-afbf-d5c028419c5c.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to 40c3946d-0cce-44e3-afbf-d5c028419c5c.png.
Getting patient info for  ['680195f77604a4525291c0e9', '6801a0dbdfc8881e853afff4']
Getting hazards and recommendations
Inside _get_hazards_and_recommendations
Encoded image:  <class 'str'>
Prompt of condition:  User has a condition: Knee pain. User has a condition: Old age. 
Hazards:  [Hazard(priority='High', description='Obstacles on the floor', score=0.9), Hazard(priority='High', description='Poor lighting', score=0.8), Hazard(priority='Medium', description='Sharp edges on furniture', score=0.7), Hazard(priority='Medium', description='Electrical cords in walkways', score=0.6), Hazard(priority='Low', description='Inadequate ventilation', score=0.5), Hazard(priority='Low', description='Uncomfortable room temperature', score=0.4)]
Recommendations:  ['Ensure adequate lighting to prevent trips and falls, especially during night.', 'Clear any clutter or obstacles on the floor to reduce tripping hazards.', 'Use assistive devices such as walkers or canes if needed for stability.', 'Consider installing grab bars in key areas like near the desk to provide support when standing or sitting.', 'Keep frequently used items within easy reach to avoid excessive bending or stretching.', 'Use a supportive chair with armrests to make it easier to sit and stand.', 'Avoid using furniture with sharp edges to prevent injuries from accidental bumps.', 'Ensure proper ventilation to maintain air quality and prevent respiratory issues.', 'Avoid placing electrical cords in high-traffic areas to prevent tripping hazards.', 'Keep the room temperature comfortable to prevent discomfort or health issues.', 'Place frequently used items within easy reach to minimize strain and prevent falls.', 'Ensure smoke detectors and carbon monoxide detectors are installed and functioning properly.', 'Keep emergency contact information readily available in case of a fall or other emergency.', 'Consider using a personal emergency response system (PERS) for immediate assistance in case of a fall or emergency.', 'Engage in regular exercise and physical therapy to maintain strength, balance, and flexibility, which can help prevent falls.']
hazard_list:  high_priority=['Obstacles on the floor', 'Poor lighting'] medium_priority=['Sharp edges on furniture', 'Electrical cords in walkways'] low_priority=['Inadequate ventilation', 'Uncomfortable room temperature']
Inside _get_risk_score
Risk score:  0.7166666666666667
Safety Score:  28
Inside _get_bounding_box
hazards texts:  [['Obstacles on the floor', 'Poor lighting', 'Sharp edges on furniture', 'Electrical cords in walkways', 'Inadequate ventilation', 'Uncomfortable room temperature']]
Sending the inputs through processor
Forward pass
Get preprocessed image
Sending post_process_grounded_object_detection with threshold  0.15
Detected Sharp edges on furniture with confidence 0.161 at location [-3.57, 90.84, 516.02, 144.2]
Detected Sharp edges on furniture with confidence 0.161 at location [0.63, 695.63, 476.68, 743.46]
Detected Sharp edges on furniture with confidence 0.151 at location [509.97, 101.47, 717.48, 142.45]
Bounding box:  [BoundingBox(box=[-3.57, 90.84, 516.02, 144.2], score=0.16083405911922455, label='Sharp edges on furniture'), BoundingBox(box=[0.63, 695.63, 476.68, 743.46], score=0.16068103909492493, label='Sharp edges on furniture'), BoundingBox(box=[509.97, 101.47, 717.48, 142.45], score=0.15118080377578735, label='Sharp edges on furniture')]
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as d53dea2a-a0c9-4c46-8de5-da0b852c075d.png
Uploaading image to  s3
File uploaded to s3 d53dea2a-a0c9-4c46-8de5-da0b852c075d.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to d53dea2a-a0c9-4c46-8de5-da0b852c075d.png.
Inside create_space_log
Result:  InsertOneResult(ObjectId('6802dab274484446e4bd1a25'), acknowledged=True)
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient HTTP/1.1" 307 Temporary Redirect
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient/ HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/6802dab274484446e4bd1a25 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/6802dab274484446e4bd1a25 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/6802dab274484446e4bd1a25 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/6802dab274484446e4bd1a25 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient HTTP/1.1" 307 Temporary Redirect
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient/ HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient HTTP/1.1" 307 Temporary Redirect
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient/ HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as 34664146-e640-45b4-beaf-c515f4b8e5a5.png
Uploaading image to  s3
File uploaded to s3 34664146-e640-45b4-beaf-c515f4b8e5a5.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to 34664146-e640-45b4-beaf-c515f4b8e5a5.png.
Getting patient info for  ['680195f77604a4525291c0e9', '6801a0dbdfc8881e853afff4']
Getting hazards and recommendations
Inside _get_hazards_and_recommendations
Encoded image:  <class 'str'>
Prompt of condition:  User has a condition: Knee pain. User has a condition: Old age. 
Hazards:  [Hazard(priority='High Priority', description='Clutter on the floor', score=0.9), Hazard(priority='High Priority', description='Rolling cart', score=0.85), Hazard(priority='High Priority', description='Slippery floors', score=0.8), Hazard(priority='Medium Priority', description='Low seating', score=0.6), Hazard(priority='Medium Priority', description='Poor lighting', score=0.5), Hazard(priority='Low Priority', description='Loose throw pillows', score=0.3), Hazard(priority='Low Priority', description='Uneven surfaces', score=0.2)]
Recommendations:  ['Clear clutter on the floor to reduce tripping hazards.', 'Secure or remove the rolling cart to prevent accidental movement and falls.', 'Ensure adequate lighting to improve visibility and reduce the risk of falls.', 'Consider adding grab bars in strategic locations to assist with balance and movement.', 'Assess the height and stability of the couch, ensuring it is easy to get in and out of.', 'Minimize the use of throw pillows on the couch to reduce clutter and potential tripping hazards.', 'Ensure there are no loose wires or cables that could cause tripping.', 'Regularly inspect the floor for uneven surfaces or loose tiles.', 'Remove or secure any small rugs or mats that may slide easily.', 'Keep frequently used items within easy reach to avoid unnecessary stretching or bending.', 'Make sure the walking paths are wide enough for easy navigation, especially if using a mobility aid.', 'Consider a higher seat for the couch to ease getting up and sitting down.', 'Evaluate the need for mobility aids such as a walker or cane.', 'Install nightlights for better visibility during nighttime.', 'Ensure clear pathways to doors and exits in case of emergency.', 'Address slippery floors with non-slip treatments or mats.', 'Modify the environment to reduce fall risk']
hazard_list:  high_priority=['Clutter on the floor', 'Rolling cart', 'Slippery floors'] medium_priority=['Low seating', 'Poor lighting'] low_priority=['Loose throw pillows', 'Uneven surfaces']
Inside _get_risk_score
Risk score:  0.69
Safety Score:  31
Inside _get_bounding_box
hazards texts:  [['Clutter on the floor', 'Rolling cart', 'Slippery floors', 'Low seating', 'Poor lighting', 'Loose throw pillows', 'Uneven surfaces']]
Sending the inputs through processor
Forward pass
Get preprocessed image
Sending post_process_grounded_object_detection with threshold  0.15
Detected Poor lighting with confidence 0.443 at location [476.61, 111.88, 511.4, 125.31]
Detected Poor lighting with confidence 0.441 at location [311.14, 162.25, 338.61, 171.61]
Detected Poor lighting with confidence 0.43 at location [706.32, 194.86, 719.81, 211.62]
Detected Poor lighting with confidence 0.424 at location [241.26, 31.51, 288.36, 52.81]
Detected Poor lighting with confidence 0.404 at location [617.86, 163.25, 646.22, 171.31]
Detected Loose throw pillows with confidence 0.385 at location [217.78, 491.77, 293.1, 550.76]
Detected Loose throw pillows with confidence 0.378 at location [407.53, 522.68, 480.45, 597.72]
Detected Poor lighting with confidence 0.372 at location [566.74, 221.86, 582.17, 225.99]
Detected Poor lighting with confidence 0.37 at location [459.32, 197.16, 482.4, 203.2]
Detected Loose throw pillows with confidence 0.361 at location [446.76, 489.99, 565.09, 614.21]
Bounding box:  [BoundingBox(box=[476.61, 111.88, 511.4, 125.31], score=0.44273751974105835, label='Poor lighting'), BoundingBox(box=[311.14, 162.25, 338.61, 171.61], score=0.44053909182548523, label='Poor lighting'), BoundingBox(box=[706.32, 194.86, 719.81, 211.62], score=0.4297281503677368, label='Poor lighting'), BoundingBox(box=[241.26, 31.51, 288.36, 52.81], score=0.4244534969329834, label='Poor lighting'), BoundingBox(box=[617.86, 163.25, 646.22, 171.31], score=0.40388327836990356, label='Poor lighting'), BoundingBox(box=[217.78, 491.77, 293.1, 550.76], score=0.3854289948940277, label='Loose throw pillows'), BoundingBox(box=[407.53, 522.68, 480.45, 597.72], score=0.378260999917984, label='Loose throw pillows'), BoundingBox(box=[566.74, 221.86, 582.17, 225.99], score=0.37230706214904785, label='Poor lighting'), BoundingBox(box=[459.32, 197.16, 482.4, 203.2], score=0.3704838156700134, label='Poor lighting'), BoundingBox(box=[446.76, 489.99, 565.09, 614.21], score=0.3614943027496338, label='Loose throw pillows')]
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as 9033074d-f4aa-433f-a5bd-1167cb2e91fa.png
Uploaading image to  s3
File uploaded to s3 9033074d-f4aa-433f-a5bd-1167cb2e91fa.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to 9033074d-f4aa-433f-a5bd-1167cb2e91fa.png.
Inside create_space_log
Result:  InsertOneResult(ObjectId('6802dd8c74484446e4bd1a26'), acknowledged=True)
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient HTTP/1.1" 307 Temporary Redirect
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient/ HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside upload_image with space_id  6800bd08b9f934916a772c00
Inside get_space_by_id
Contents type:  <class 'bytes'>
Image type:  <class 'PIL.JpegImagePlugin.JpegImageFile'>
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as 9536cb17-fccd-4e89-950c-1594a20b69e7.png
Uploaading image to  s3
File uploaded to s3 9536cb17-fccd-4e89-950c-1594a20b69e7.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to 9536cb17-fccd-4e89-950c-1594a20b69e7.png.
Getting patient info for  ['680195f77604a4525291c0e9', '6801a0dbdfc8881e853afff4']
Getting hazards and recommendations
Inside _get_hazards_and_recommendations
Encoded image:  <class 'str'>
Prompt of condition:  User has a condition: Knee pain. User has a condition: Old age. 
Hazards:  [Hazard(priority='High Priority', description='Clutter on the floor near the entrance', score=0.9), Hazard(priority='High Priority', description='Shoes obstructing the walking path', score=0.85), Hazard(priority='High Priority', description='Cart with wheels', score=0.8), Hazard(priority='High Priority', description='Rug near the entrance', score=0.75), Hazard(priority='Medium Priority', description='Low lighting', score=0.7), Hazard(priority='Medium Priority', description='Unstable shelving unit', score=0.65), Hazard(priority='Medium Priority', description='Bottle near the edge of the cart', score=0.6), Hazard(priority='Medium Priority', description='Objects on the table near the sofa', score=0.55), Hazard(priority='Medium Priority', description='Speaker on a stool', score=0.5), Hazard(priority='Medium Priority', description='Plastic bag under the sofa', score=0.45), Hazard(priority='Low Priority', description='Open door', score=0.4), Hazard(priority='Low Priority', description='Potentially unstable furniture', score=0.35), Hazard(priority='Low Priority', description='Use of stools', score=0.3), Hazard(priority='Low Priority', description='Cords and wires', score=0.25), Hazard(priority='Low Priority', description='Low sofa', score=0.2)]
Recommendations:  ['Remove the cart with wheels to avoid accidental rolling.', 'Move the shoes away from the walking path to prevent tripping.', 'Remove the clutter from the floor, especially near the entrance, to create a clear and safe path.', 'Secure or remove the rug near the entrance to prevent tripping.', 'Ensure adequate lighting throughout the room to improve visibility.', 'Place items on the shelving unit in a more organized and stable manner.', 'Remove the bottle near the edge of the cart.', 'Clear the objects on the table near the sofa.', 'Move the speaker on the stool to the floor.', 'Remove the plastic bag from under the sofa.', 'Ensure the open door stays open to prevent the knee from getting hit.', 'Check the stability of the furniture and rearrange if needed.', 'Avoid the use of stools and use stable chairs instead.', 'Ensure any cords or wires are properly managed and not creating a tripping hazard.', 'Consider a higher sofa or seating arrangement to make it easier to stand up and sit down with knee pain.', "Secure the blinds on the window to make sure they don't fall and cause injury.", 'Place the plant away from the walking path.', 'Remove the vacuum cleaner from walking path.', 'Use a walking stick to avoid falling.', 'Use knee pads to help with the pain.', 'Remove the bottle near the edge of the cart.', 'Remove the cloth on the bottle near the cart.', 'Apply carpets with good traction to help avoid falls.', 'Apply a non slip finish to the floor so you can walk around easier and more stable.', 'Avoid using plastic container to carry objects since they can get damaged easily and cause more damage. Instead use metallic containers.', 'Use a walker if needed for increased stability.', 'Use assistive devices in the bathroom, such as grab bars and raised toilet seats.', 'Consider using voice-activated or smart home devices to control lights and appliances, reducing the need to move around as much.', 'Consult with a physical therapist for exercises to strengthen knee muscles and improve balance.', 'Install grab bars near the entrance and in other areas for support.', 'Consider moving frequently used items to easily accessible locations.', 'Evaluate the need for the various items.', 'Improve your balance by working out.', 'Make sure you are eating healthy food that helps strengthen your bones.', 'Consult with a doctor.', 'Take prescribed medicines in the appropiate dosages.', 'Always have your phone with you in case of emergency.', 'Try to have somebody else in the house to help you with daily routines.', 'Make sure you are drinking enough water to avoid dizziness.', 'Control your blood pressure, high blood pressure could be bad for your health.']
hazard_list:  high_priority=['Clutter on the floor near the entrance', 'Shoes obstructing the walking path', 'Cart with wheels', 'Rug near the entrance'] medium_priority=['Low lighting', 'Unstable shelving unit', 'Bottle near the edge of the cart', 'Objects on the table near the sofa', 'Speaker on a stool', 'Plastic bag under the sofa'] low_priority=['Open door', 'Potentially unstable furniture', 'Use of stools', 'Cords and wires', 'Low sofa']
Inside _get_risk_score
Risk score:  0.6310344827586207
Safety Score:  37
Inside _get_bounding_box
hazards texts:  [['Clutter on the floor near the entrance', 'Shoes obstructing the walking path', 'Cart with wheels', 'Rug near the entrance', 'Low lighting', 'Unstable shelving unit', 'Bottle near the edge of the cart', 'Objects on the table near the sofa', 'Speaker on a stool', 'Plastic bag under the sofa', 'Open door', 'Potentially unstable furniture', 'Use of stools', 'Cords and wires', 'Low sofa']]
Sending the inputs through processor
Forward pass
Get preprocessed image
Sending post_process_grounded_object_detection with threshold  0.15
Detected Low sofa with confidence 0.514 at location [166.75, 537.79, 527.2, 748.82]
Detected Cords and wires with confidence 0.434 at location [61.19, 592.49, 114.85, 651.99]
Detected Speaker on a stool with confidence 0.396 at location [320.73, 454.91, 355.58, 503.28]
Detected Cords and wires with confidence 0.335 at location [64.49, 630.83, 110.65, 648.32]
Detected Potentially unstable furniture with confidence 0.319 at location [167.76, 572.11, 292.08, 793.84]
Detected Open door with confidence 0.28 at location [160.39, 322.25, 216.8, 521.83]
Detected Speaker on a stool with confidence 0.269 at location [320.96, 468.21, 356.58, 510.72]
Detected Low sofa with confidence 0.266 at location [281.01, 542.41, 525.8, 742.67]
Detected Speaker on a stool with confidence 0.26 at location [521.36, 467.92, 560.33, 518.74]
Detected Speaker on a stool with confidence 0.249 at location [523.42, 468.76, 559.93, 523.52]
Bounding box:  [BoundingBox(box=[166.75, 537.79, 527.2, 748.82], score=0.5137900710105896, label='Low sofa'), BoundingBox(box=[61.19, 592.49, 114.85, 651.99], score=0.43405383825302124, label='Cords and wires'), BoundingBox(box=[320.73, 454.91, 355.58, 503.28], score=0.39627137780189514, label='Speaker on a stool'), BoundingBox(box=[64.49, 630.83, 110.65, 648.32], score=0.33525198698043823, label='Cords and wires'), BoundingBox(box=[167.76, 572.11, 292.08, 793.84], score=0.3194122612476349, label='Potentially unstable furniture'), BoundingBox(box=[160.39, 322.25, 216.8, 521.83], score=0.2798771560192108, label='Open door'), BoundingBox(box=[320.96, 468.21, 356.58, 510.72], score=0.26883193850517273, label='Speaker on a stool'), BoundingBox(box=[281.01, 542.41, 525.8, 742.67], score=0.26607054471969604, label='Low sofa'), BoundingBox(box=[521.36, 467.92, 560.33, 518.74], score=0.2598118782043457, label='Speaker on a stool'), BoundingBox(box=[523.42, 468.76, 559.93, 523.52], score=0.24915623664855957, label='Speaker on a stool')]
Sending request with /home/prathik-somanath/git/responsible/backend-server/temp_image.png to riskitfree as 4b72e893-2cd2-46a7-80b3-b034e3554662.png
Uploaading image to  s3
File uploaded to s3 4b72e893-2cd2-46a7-80b3-b034e3554662.png
File /home/prathik-somanath/git/responsible/backend-server/temp_image.png uploaded to 4b72e893-2cd2-46a7-80b3-b034e3554662.png.
Inside create_space_log
Result:  InsertOneResult(ObjectId('6802ddd974484446e4bd1a27'), acknowledged=True)
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "POST /space/logs/upload-image HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient HTTP/1.1" 307 Temporary Redirect
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient/ HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient HTTP/1.1" 307 Temporary Redirect
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient/ HTTP/1.1" 200 OK
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient HTTP/1.1" 307 Temporary Redirect
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient HTTP/1.1" 307 Temporary Redirect
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient/ HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient/ HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient HTTP/1.1" 307 Temporary Redirect
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient/ HTTP/1.1" 200 OK
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient HTTP/1.1" 307 Temporary Redirect
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient HTTP/1.1" 307 Temporary Redirect
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient/ HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient/ HTTP/1.1" 200 OK
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient HTTP/1.1" 307 Temporary Redirect
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Spaces: [SpaceResponse(id='6800bd08b9f934916a772c00', space_name='Living Room 1', user_id='680032910f85f3520b9ea977', description='Main living area with furniture and electronics', patient_ids=['680195f77604a4525291c0e9', '6801a0dbdfc8881e853afff4'], created_at=datetime.datetime(2025, 4, 17, 1, 34, 16, 284000), updated_at=datetime.datetime(2025, 4, 17, 17, 46, 30, 324000))]
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/user HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient/ HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/space/6800bd08b9f934916a772c00 HTTP/1.1" 200 OK
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient HTTP/1.1" 307 Temporary Redirect
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient/ HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/6802ddd974484446e4bd1a27 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/6802dd8c74484446e4bd1a26 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/6802dd8c74484446e4bd1a26 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/6802dd8c74484446e4bd1a26 HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Inside get_space_by_id
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/logs/6802dd8c74484446e4bd1a26 HTTP/1.1" 200 OK
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient HTTP/1.1" 307 Temporary Redirect
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
Spaces: [SpaceResponse(id='6800bd08b9f934916a772c00', space_name='Living Room 1', user_id='680032910f85f3520b9ea977', description='Main living area with furniture and electronics', patient_ids=['680195f77604a4525291c0e9', '6801a0dbdfc8881e853afff4'], created_at=datetime.datetime(2025, 4, 17, 1, 34, 16, 284000), updated_at=datetime.datetime(2025, 4, 17, 17, 46, 30, 324000))]
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /space/user HTTP/1.1" 200 OK
Decoding token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2ODAwMzI5MTBmODVmMzUyMGI5ZWE5NzciLCJleHAiOjE3NDUxNzYwMDN9.bZwACIluQ9CNqVDSz9Vzvl5ppHor9KfKVrrzhr2xShU
Payload: {'sub': '680032910f85f3520b9ea977', 'exp': 1745176003}
INFO:     2603:8000:ba00:2aae:dde4:c975:a41f:61d0:0 - "GET /patient/ HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [893520]
Database connection closed
Exception ignored in atexit callback: <function _shutdown_resources at 0x7140a2bd1f80>
Traceback (most recent call last):
  File "/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pymongo/monitor.py", line 482, in _shutdown_resources
    shutdown()
  File "/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pymongo/periodic_executor.py", line 198, in _shutdown_executors
    executor.join(1)
  File "/home/prathik-somanath/git/responsible/backend-server/venv/lib/python3.12/site-packages/pymongo/periodic_executor.py", line 116, in join
    self._thread.join(timeout)
  File "/usr/lib/python3.12/threading.py", line 1151, in join
    self._wait_for_tstate_lock(timeout=max(timeout, 0))
  File "/usr/lib/python3.12/threading.py", line 1167, in _wait_for_tstate_lock
    if lock.acquire(block, timeout):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyboardInterrupt: 
INFO:     Stopping reloader process [888858]
